//////////////////////////////////////////////////////////////////////

#include "stdafx.h"

//////////////////////////////////////////////////////////////////////

Mesh::Mesh()
	: mMaterial(null)
{
}

//////////////////////////////////////////////////////////////////////

Mesh::~Mesh()
{
	::Release(mMaterial);
}

//////////////////////////////////////////////////////////////////////

Mesh *Mesh::Create(MeshType type, uint vertexBase, uint indexBase, uint indexCount, Material *material)
{
	Mesh *m = new Mesh();
	m->mType = type;
	m->mVertexBase = vertexBase;
	m->mIndexBase = indexBase;
	m->mIndexCount = indexCount;
	m->mMaterial = material;
	m->mMaterial->AddRef();
	return m;
}

//////////////////////////////////////////////////////////////////////

Material *Mesh::GetMaterial() const
{
	return mMaterial;
}

//////////////////////////////////////////////////////////////////////

void Mesh::Draw()
{
	mMaterial->Activate();
	Graphics::DrawIndexed(mType, mVertexBase, mIndexBase, mIndexCount);
}

//////////////////////////////////////////////////////////////////////

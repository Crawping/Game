//////////////////////////////////////////////////////////////////////

#include "stdafx.h"


//////////////////////////////////////////////////////////////////////

static App *sApp = null;

//////////////////////////////////////////////////////////////////////

void App::ResetAllInput()
{
	LastCharPressed = 0;
	LastKeyPressed = 0;
	memset(kbHeld, 0, sizeof(kbHeld));
	memset(kbPressed, 0, sizeof(kbPressed));
	memset(kbReleased, 0, sizeof(kbReleased));
}

//////////////////////////////////////////////////////////////////////

App::App()
{
	assert(sApp == null);
	sApp = this;
}

//////////////////////////////////////////////////////////////////////

App::~App()
{
}

//////////////////////////////////////////////////////////////////////

App &App::Get()
{
	return *sApp;
}

//////////////////////////////////////////////////////////////////////

void App::Close()
{
	Graphics::Close();
}

//////////////////////////////////////////////////////////////////////

int App::Run()
{
	if(Graphics::Open())
	{
		OnInit();

		while(Graphics::Update())
		{
			Mouse::Update();
			Keyboard::Update();
			Joypad::Update();
			if(OnUpdate() == false)
			{
				break;
			}
		}

		OnClose();
		Close();
	}
	return 0;
}

//////////////////////////////////////////////////////////////////////


//////////////////////////////////////////////////////////////////////

#include "stdafx.h"

//////////////////////////////////////////////////////////////////////

static App *sApp = null;

//////////////////////////////////////////////////////////////////////

App::App()
{
	assert(sApp == null);
	sApp = this;
	TRACE("The App is at %p\n", sApp);
}

//////////////////////////////////////////////////////////////////////

App::~App()
{
}

//////////////////////////////////////////////////////////////////////

App &App::Get()
{
	return *sApp;
}

//////////////////////////////////////////////////////////////////////

void App::Close()
{
	Graphics::Close();
}

//////////////////////////////////////////////////////////////////////

int App::Run()
{
	if(Graphics::Open())
	{
		OnInit();

		while(Graphics::Update())
		{
			Mouse::Update();
			Keyboard::Update();
			Joypad::Update();
			if(OnUpdate() == false)
			{
				break;
			}
		}

		OnClose();
		Close();
	}
	return 0;
}

//////////////////////////////////////////////////////////////////////

